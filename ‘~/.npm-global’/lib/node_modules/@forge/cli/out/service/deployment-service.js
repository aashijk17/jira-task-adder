"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DeploymentService = void 0;
const DEFAULT_LOOKBACK_PERIOD_MS = 30 * 24 * 60 * 60 * 1000;
class DeploymentService {
    getAppConfig;
    listDeploymentsClient;
    constructor(getAppConfig, listDeploymentsClient) {
        this.getAppConfig = getAppConfig;
        this.listDeploymentsClient = listDeploymentsClient;
    }
    async listAppDeployments(interval, filter) {
        const { id: appId } = await this.getAppConfig();
        const defaultInterval = interval
            ? interval
            : {
                startTimeUtc: new Date(Date.now() - DEFAULT_LOOKBACK_PERIOD_MS).toISOString().split('T')[0],
                endTimeUtc: new Date().toISOString()
            };
        const deployments = await this.listDeploymentsClient.listDeployments(appId, defaultInterval, filter);
        return { deployments };
    }
}
exports.DeploymentService = DeploymentService;
//# sourceMappingURL=deployment-service.js.map