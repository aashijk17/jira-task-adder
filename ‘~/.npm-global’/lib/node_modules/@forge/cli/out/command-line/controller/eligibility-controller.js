"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.EligibilityController = void 0;
class EligibilityController {
    roaService;
    view;
    constructor(roaService, view) {
        this.roaService = roaService;
        this.view = view;
    }
    async checkRoaEligibility({ environment, majorVersion }) {
        const { reason, isEligible, appVersion, environmentType } = await this.view.displayProgress(() => this.roaService.getEligibilityStatus(environment, majorVersion));
        if (!isEligible) {
            this.view.displayRoaEligibilityFailureMessage(appVersion, environment, environmentType, reason.map((rule) => rule.name));
        }
        else {
            this.view.displayRoaEligibilitySuccessMessage(appVersion, environment, environmentType);
        }
    }
}
exports.EligibilityController = EligibilityController;
//# sourceMappingURL=eligibility-controller.js.map