"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ManifestInterpolatorManager = void 0;
const yaml_1 = require("yaml");
class ManifestInterpolatorManager {
    interpolators;
    constructor() {
        this.interpolators = new Map();
    }
    addInterpolator(interpolator) {
        this.interpolators.set(interpolator.type, interpolator);
    }
    interpolate({ content, filePath }) {
        let interpolatedManifest = (0, yaml_1.parse)(content);
        for (const interpolator of this.interpolators.values()) {
            interpolatedManifest = interpolator.interpolate({ manifest: interpolatedManifest, filePath });
        }
        return interpolatedManifest;
    }
}
exports.ManifestInterpolatorManager = ManifestInterpolatorManager;
