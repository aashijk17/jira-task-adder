"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AppFeaturesValidator = void 0;
const text_1 = require("../text");
const utils_1 = require("../utils");
class AppFeaturesValidator {
    async validate(manifest) {
        const app = manifest?.typedContent?.app;
        const validationErrors = [];
        if (app?.features?.autoUserConsent !== undefined) {
            validationErrors.push({
                message: text_1.errors.app.features.deprecatedAutoUserConsent(),
                reference: text_1.References.Deprecated,
                level: 'warning',
                ...(0, utils_1.findPosition)('autoUserConsent', manifest?.yamlContentByLine)
            });
        }
        return {
            success: validationErrors.length === 0,
            manifestObject: manifest,
            errors: validationErrors
        };
    }
}
exports.AppFeaturesValidator = AppFeaturesValidator;
